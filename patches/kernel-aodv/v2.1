diff -Nur kernel-aodv_v2.1/Makefile kernel-aodv_v2.1.new/Makefile
--- kernel-aodv_v2.1/Makefile	2003-05-09 23:28:13.000000000 +0200
+++ kernel-aodv_v2.1.new/Makefile	2003-08-22 00:36:53.000000000 +0200
@@ -1,7 +1,7 @@
 #Thanks to Bruno Randolf for cleaning up the Makefile
 #It should be more extensible now.
 
-KVERSION=`uname -r`
+KVERSION=$(KERNEL_VERSION)
 
 LOCATE=locate
 # if you don't have locate uncomment the line below...it should work.
@@ -30,9 +30,9 @@
 
 
 ifeq ($(TARGET),x86)
-	CC := gcc
+	CC := $(CROSS_COMPILE)gcc
 	LD := ld -m elf_i386 -r
-	KPATH := /lib/modules/$(KVERSION)/build/include/
+	KPATH := $(DESTDIR)/lib/modules/$(KVERSION)/build/include/
 	MODCFLAGS :=  -O3 -DMODULE -D__KERNEL__ -DLINUX -DMESSAGES
 endif
 ifeq ($(TARGET),arm)
